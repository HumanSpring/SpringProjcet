<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="common/layout/defaultLayout">

<!--  
 * 게시판 상세 페이지
 * 2021. 12. 16.
 * Jenny (secrethappy@naver.com)
 -->

<!-- 타이틀 -->
<th:block layout:fragment="title">
	<title>상품 상세 페이지</title>
</th:block>


<th:block layout:fragment="content">
	<div class="card-content container">

		<!-- 콘텐츠 시작-->
		<section class="py-5 form-horizontal form-view" th:object="${board}">
			<div class="container px-4 px-lg-5 my-5">
				<div class="row gx-4 gx-lg-5 align-items-center">

					<!-- 상품 사진 -->
					<div class="col-md-6">
						<div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
							<div class="carousel-inner">
								<div class="carousel-item active">
									<img src="/imgs/product1.jpg" class="d-block w-100" alt="...">
								</div>
								<div class="carousel-item">
									<img src="/imgs/product2.jpg" class="d-block w-100" alt="...">
								</div>
								<div class="carousel-item">
									<img src="/imgs/product3.jpg" class="d-block w-100" alt="...">
								</div>
							</div>
							<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
								<span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="visually-hidden">Previous</span>
							</button>
							<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
								<span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="visually-hidden">Next</span>
							</button>
						</div>
					</div>

					<!-- 상품 사진 오른쪽 내비 시작 -->
					<div class="col-md-6">
						<!-- 판매 여부 -->
						<div class="small mb-1">
							<!-- <label for="inp-type-1" class="col-sm-2 control-label">판매 상태</label> <span th:text="*{salesStatus}"></span> -->
							<label for="inp-type-1" class="col-sm-2 control-label">판매 상태</label> <span th:text="판매중"></span>
						</div>

						<!-- 상품명 -->
						<h1 class="display-5 fw-bolder">
							<p th:text="*{title}"></p>
						</h1>

						<!-- 상세 정보 -->
						<div class="fs-5 mb-5">
							<div>
								<span>상품 가격 </span> <span th:text="*{#numbers.formatInteger(price, 0, 'COMMA')}+'원'"></span>
							</div>
							<div>
								<span>판매 유저 </span> <span th:text="*{userNo}"></span>
							</div>
							<div>
								<span>등록 날짜 </span> <span th:text="*{#dates.format( writeDate, 'yyyy-MM-dd' )}"></span>
							</div>
							<div>
								<span>조회수 </span> <span th:text="*{viewCount}"></span>
							</div>
						</div>

						<!-- 찜, 신고 -->
						<div class="d-grid gap-2 d-md-block ">
							<!-- 찜 -->
							<button class="btn btn-danger col-sm-3" type="button">찜</button>

							<!-- 신고 -->
							<button class="btn btn-secondary col-sm-3" type="button" th:unless="${session.loginMember == null}">
								<a href="#" th:href="@{/reported/boardReportedWrite.do}" onclick="window.open(this.href, '_blank', 'width=500px,height=400px,toolbars=no,scrollbars=no'); return false;" class="boardViewUrl reportedButton"> 신고 </a>
							</button>
						</div>
						<!--찜, 신고 끝 -->
					</div>
					<!-- 상품 사진 오른쪽 내비 끝-->
				</div>
			</div>

			<!-- 상품 판매 입력된 내용 시작 -->
			<div class="form-group container px-4 px-lg-5 my-5">
				<label for="inp-type-5" class="col-sm-2 control-label"><br> <b></b>
					<h2>상품 상세 정보</h2> </b></label>
				<div class="col-sm-12 ">
					<p class="form-control boardViewContent" th:text="*{content}"></p>
				</div>
			</div>
			<!-- 상품 판매 입력된 내용 끝 -->
		</section>
		<!-- 콘텐츠 끝 -->
	</div>

	<!-- 버튼 모음 시작 -->
	<div class="btn_wrap text-center">
		<!-- 뒤로가기 버튼 -->
		<a th:href="@{list.do}" class="btn btn-success waves-effect waves-light">뒤로가기</a>
		<!-- 수정하기 버튼 -->
		<a th:href="@{write.do( boardNo=${board.boardNo} )}" th:if="${session.loginMember != null &&  session.loginMember.userNo == board.userNo}" class="btn btn-primary waves-effect waves-light">수정하기</a>
		<!-- 삭제하기 버튼 -->
		<button type="button" class="btn btn-danger waves-effect waves-light" th:if="${session.loginMember != null &&  session.loginMember.userNo == board.userNo}" th:onclick="deleteBoard([[ ${board.boardNo} ]])">삭제하기</button>
	</div>
	<!-- 버튼 모음 끝 -->
</th:block>

<!-- 댓글 시작 -->
<th:block layout:fragment="add-content">
	<div class="box-content container">
		<div class="card-content">
			<div class="clearfix">
				<h4 class="box-title pull-left">Comment</h4>
				<!-- /.box-title -->
			</div>

			<form class="form-horizontal form-view">
				<div class="input-group margin-bottom-20">
					<input type="email" class="form-control" placeholder="">
					<div class="input-group-btn">
						<button type="button" class="btn waves-effect waves-light">
							<i class="fa fa-commenting" aria-hidden="true"></i>
						</button>
					</div>
					<!-- /.input-group-btn -->
				</div>
				<ul class="notice-list">
					<li>
						<span class="name">Betty Simmons</span> <span class="desc">There are new settings available</span> <span class="time">2019.03.26</span>
						<button type="button" class="btn btn-xs btn-circle">
							<i class="fa fa-close" aria-hidden="true"></i>
						</button>
					</li>
					<li>
						<span class="name">Betty Kim</span> <span class="desc">There are new settings available</span> <span class="time">2019.03.15</span>
						<button type="button" class="btn btn-xs btn-circle">
							<i class="fa fa-close" aria-hidden="true"></i>
						</button>
					</li>
				</ul>
			</form>
		</div>
		<!-- /.card-content -->
	</div>
	<!-- /.box-content -->
</th:block>
<!-- 댓글 끝 -->

<!-- 삭제 스크립트 시작 -->
<th:block layout:fragment="add-script">
	<script th:inline="javascript">
		/*<![CDATA[*/

		function deleteBoard(boardNo) {
			if (confirm(boardNo + "번 게시글을 삭제할까요?")) {
				var uri = /*[[ @{delete.do} ]]*/null;
				var html = "";

				html += '<form name="dataForm" action="'+uri+'" method="post">';
				html += '<input type="hidden" name="boardNo" value="'+boardNo+'" />';
				html += '</form>';

				$("body").append(html);
				document.dataForm.submit();
			}
		}

		/*[- end of function -]*/

		/*]]>*/
	</script>
</th:block>
<!-- 삭제 스크립트 끝 -->
</html>